## **Links**
- https://de.wikipedia.org/wiki/IPv6

## **Aufbau IPv6**

128 bit Addressen dargestellt in je 8 Gruppen in 16 Bits, getrennt durch Doppelpunkte (:)

- Kürtungsregeln:
	- Führenden Nullen dürfen ausgelassen werden.
	- Eine folge an 0-blöcken wird weggelassen, als `::` geschrieben
	- `::` darf pro Adresse nur einmal verwendet werden.

Addresse-Präfixe werden durch `addresse/n` gekennzeichnet.
Erste `n` bits der Addresse sind nicht änderbar (Routingpräfix + Subnet-ID)

## Addresstypen

| Typ       | Kommunikation     | Beispiel/Hinweis                             |
| --------- | ----------------- | -------------------------------------------- |
| Unicast   | 1 -> 1            | 200:db8::1 (ein Host)                        |
| Multicast | 1 -> n            | ff02::1 (alle Knoten), ff02::2 (alle Router) |
| Anycast   | 1 -> 1 (nächstes) | 2001:db8::1:1 (z. B. DNS-Server-Cluster)     |
| Broadcast | entfällt          | durch Multicast ersetzt                      |

### **Global Unicast**
- Struktur:
	- Global Routingprefix: n Bit
	- Subnet-ID: m Bit
	- Interface Identifier: 128 - n - m Bit
- IPv6 verwendet in der Regel 64 Bit lange Schnittstellen-IDs
- Global gültige IPv6-Adressen beginnen mit dem Präfix `2000::/3` – d. h. sie starten mit den Bits 001. Ein großer Teil der heute vergebenen Adressräume liegt im Bereich `2001::/16`.

Client generiert eindeutige Schnittstellen-ID selber -> Automatische Selbstkonfiguration (ohne DHCP) möglich
Schnittstellen-ID kann aus MAC-Addresse abgeleitet werden (48 bit -> 64 bit):
- FF:FE in der mitte hinzugefügt
- Vorletzter bit des ersten byte:
	- 0 -> weltweit eindeutige addresse
	- 1 -> lokal gültige addresse


### **Local Unicast:**
- Verbindungslokal / Link Local
	- Beginnen mit dem Präfix `FE80::/10`
	- 64 Bit eindeutige Schnittstellen ID aus MAC-Adresse nach EUI-64
	- Immer automatisch generiert
	- z.B. für lokale **Neighbor Discovery**
	- Nur für lokale Verbindung
- Standortlokal / Site Local
	- Beginnen mit `FEC0`
	- Veraltet, nicht mehr Verwendet
	- Intranet, Entsprachen Privaten IPv4 Addressen
- Standortlokal / Unique Local
	- Beginnen mit `FC`
	- Intranet, Entsprechen Privaten IPv4 Addressen
	- 40 bit zufällige Site-ID um Standort zu kennzeichnen(!)
	- 16 bit Subnet-ID

### **Unique Local Addresses**
- Beginnen mit dem Präfix `FD00::/8`.
- Die Global ID (40 Bit) wird zufällig generiert, um eine hohe Wahrscheinlichkeit der Eindeutigkeit zu gewährleisten.
- Die Subnetz-ID (16 Bit) identifiziert ein Subnetz innerhalb der Organisation („Site“)
- privaten Netzwerken (Intranets) eingesetzt.

### **Spezielle Addressen:**
- Nicht Spezifizierte Addresse (`::`)
	- 0:0:...:0 (aka `::`)
	- Praktisch Null-Addresse
	- Entspricht in IPV4 der Adresse `0.0.0.0`
- Loopback (::1)
	- `::1`
	- Niemals Routed
- Multicast
	- Beginnen `FF`
	- 4 bit flag, 4 bit scope
		- Info über Geltungsbereich/Aufbau
	- 112 bit Group-ID

##### Header
Basisheader mit fester länge (40 byte), der nur wichtigste/notwendige Daten enthält.
Optionen-Header sind Verkettet ("Next" gibt an welcher Type als nächstes kommt).

- Version = 6
- Payload length = max 64KiB
- Next:
	- Welcher (Option-)Header kommt als Nächstes
	- z.B. Routing/Fragmenting/Auth/Encryption; Tcp/Udp/None
	- Option-Header haben dann wieder ein Next-Field, welches angibt welcher als nächstes kommt
	- Es gibt eine korrekte reihenfolge
