### DNS
*AKA Domain Name System*
Niemand möchte sich IP-Addressen Merken
DNS löst namen (google.com) in IP-Addresen auf
- Verteilte Datenbank in Baumstruktur
- DNS-Info (Resource Records) werden in Zonen aufgeteilt und auf verschiedenen Knoten (Namensservern / Name Server) verwaltet
- "Zone" ist für eine oder viele Domains verantwortlich
- Name Server sind (oft über DNS-Protokoll) öffentlich erreichbar

- Domänennamen Syntax im Internet Ein Domänenname besteht aus einem oder mehreren Teilen („Labels“). 
	- Labels sind durch Punkte voneinander getrennt. 
	- Die Hierarchie von Labels nennt man auch Level (gelesen von rechts nach links). 
	- Das Null-Label (Länge ist 0) ist für die Wurzelzone reserviert. 
	- Ein Label kann bis zu 63 Zeichen lang sein, die gesamte Domain bis zu 255 Byte (ca. 253 Zeichen Nutzlänge).

## DNS Namensauflösung mit Resolver 
- Der Client sendet eine **rekursive DNS-Anfrage** an seinen konfigurierten **rekursiven Resolver** (z. B. im ISP oder lokalen Router), um die IP-Adresse von en.wikipedia.org.zu erhalten. 
- Der Eintrag liegt *nicht* im Cache. Der rekursive Resolver startet deshalb eine **iterative Auflösung** beginnend bei einem Root-Nameserver. 
- Der Root-Server liefert einen Verweis (NS + Glue) auf die Nameserver der org-TLD. 
- Der rekursive Resolver fragt einen org-TLD-Nameserver nach en.wikipedia.org..
- Der TLD-Server verweist auf die autoritativen Nameserver der Zone wikipedia.org. 
- Der rekursive Resolver fragt einen dieser autoritativen Nameserver nach en.wikipedia.org.. 
- Der autoritative Nameserver wikipedia.org liefert die IP-Adresse von en.wikipedia.org.. 
- Der rekursive Resolver speichert die Antwort im Cache und sendet sie an den Client zurück.
Der Client kann nun IP-Pakete (z. B. mit TCP/HTTP) an en.wikipedia.org.senden

Beim Auflösen werden die Namensserver nacheinander gefragt
Für de.wikipedia.com:
- Anwendung
	- Lokaler Server
		- root
		- org
		- wikipedia.org

Es gibt 2 Arten von Nameserver
- Autorativ
	- Gibt first-hand info für Domains in seiner Zone
	- Root-Nameserver
		- Info über TLD-Nameserver
	- TLD-Nameserver
		- Info über Domain-Nameserver
	- Domain Nameserver
		- IPs von Domains und Info über Subdomain-Nameserver
- Nicht-Autorativ
	- Recursive Resolver der DNS-Auflösen für Client übernimmt
		- z.B. Google 8.8.8.8, Cloudflare 1.1.1.1
		- Aber auch ISP-DNS-Server der im Router vorkonfiguriert ist
	- Vorteil wegen Cache

DNS Resource Records (RR)
Format von DNS-Info
Typische Textform: `name ttl class type rdata`
- name = domain name zu dem der RR gehört
- ttl = gültigkeit des RR in Sekunden
- class = IN für internet (sonst nur 2 uralt legacy sachen)
- type = Art des Records
	- A = IPv4 einer Node
	- AAAA = IPv6 einer Node
	- NS = Hostname eines autorativen Nameservers
	- CNAME = canonical name = auf anderen hostname redirecten
	- ... und viele mehr
- rdata = Daten des RR (z.B. IP für type=A)
z.B.
- org. 172800 IN NS b2.org.afilias-nst.org
	- Der Autorative Nameserver für "org" zone ist "b2.org.afilias-nst.org"
- h.root-servers.net. 518400 IN A 198.97.190.53
	- Die IPv4 von dem server bei "h.root-servers.net" ist "198.97.190.53"

Lastverteilung / Load Balancing mit DNS
- Nameserver verteilt verschiedene IP-Addressen je nach Anfrage
- Pro: Sehr einfach
- Contra: Oft genutzte öffentliche DNS-Server cachen IP, wodruch auslastung inkonsistent und unflexibel ist

Blacklisting/Datenschutz
DNS-Protokoll ist ungeschützt
- DNS-Antworten können auf dem Kommunikationsweg manipuliert werden
- Nicht-Autorative DNS-Server können falsche Daten zurückgeben und so Zensieren
- DNS-Server sieht effektiv alle DNS-Anfragen (=kontaktierte Services) einer IP